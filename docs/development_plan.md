# 项目开发计划

本项目将采用敏捷开发的模式，分阶段迭代，确保核心功能优先上线并快速响应变化。

---

### 第一阶段：项目奠基与UI构建 (预计1周)

- **任务**:
    - [x] 初始化Flutter项目。
    - [x] 创建项目文件夹结构 (`/docs`, `/prototypes`)。
    - [x] 编写项目说明和开发计划文档。
    - [x] 完成应用原型设计和流程图。
    - [ ] **(下一步)** 根据原型，使用Flutter构建所有核心页面的静态UI，包括：
        - [ ] 首页 (Dashboard)
        - [ ] 账单历史页 (History)
        - [ ] 手动记账页 (Manual Add)
        - [ ] 设置页 (Settings)
    - [ ] 搭建基础的状态管理框架。

---

### 第二阶段：核心功能实现 (Android) (预计2周)

- **任务**:
    - [x] **关键任务**: 在Android端使用Kotlin或Java实现 `NotificationListenerService`。
    - [x] 使用Platform Channels搭建Flutter与Android原生代码的通信桥梁。
    - [x] 在Flutter端接收到原生代码传来的交易数据后，弹出"交易确认"弹窗。
    - [x] 完善设置页面，加入引导用户开启"通知读取权限"的流程。
    - [x] (新增) 添加Debug界面，用于显示原生通知数据，并提供手动开关。
    - [ ] 编写正则表达式或解析逻辑，用于精确提取微信、支付宝通知中的金额、商户等信息。
    - [ ] 实现本地数据库 (`sqflite` 或 `drift`) 的集成，完成交易记录的增、删、改、查功能。
    - [ ] 对Android真机进行充分测试，确保不同品牌手机的通知格式兼容性。

---

### 第三阶段：功能完善与体验优化 (预计1.5周)

- **任务**:
    - [ ] 在首页和历史页实现数据可视化图表。
    - [ ] 实现历史记录的筛选和搜索功能。
    - [ ] 优化弹窗交互和动画效果，提升用户体验。
    - [x] 完善设置页面，加入引导用户开启"通知读取权限"的流程。
    - [ ] 编写单元测试和集成测试，保障代码质量。

---

### 第五阶段：构建与发布 (预计0.5周)

- **任务**:
    - [ ] **重要**: 确认并移除/关闭所有调试功能 (如调试卡片)。
    - [ ] 配置 `build.gradle.kts` 和 `Info.plist`，更新应用版本号、图标等信息。
    - [ ] 设置Github Actions CI/CD, 实现自动化构建APK/AppBundle。
    - [ ] 进行多轮回归测试。
    - [ ] 准备应用商店上架所需材料，发布Beta版本。 